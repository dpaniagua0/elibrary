<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : books.query.xml
    Created on : May 30, 2011, 2:54 AM
    Author     : arcesino
    Description:
        Purpose of the document follows.
-->

<!DOCTYPE properties SYSTEM 'http://java.sun.com/dtd/properties.dtd'>

<properties>
  <entry key="books.query.findBooks">
    <![CDATA[
      SELECT l.id, l.title, l.fecha_publicacion, l.isbn, s.id id_serie,
             s.name bookSeries, a.id id_autor, a.name autor,
             a.lastName apellidos_autor, c.id id_categoria, c.name categoria,
             e.id id_editorial, e.name editorial
      FROM book l
      LEFT JOIN Serie s ON s.id = l.id_serie
      LEFT JOIN Libro_Autor la ON la.id_libro = l.id
      LEFT JOIN Autor a ON a.id = la.id_autor
      LEFT JOIN Libro_Categoria lc ON lc.id_libro = l.id
      LEFT JOIN Categoria c ON c.id = lc.id_categoria
      LEFT JOIN Libro_Editorial le ON le.id_libro = l.id
      LEFT JOIN Editorial e ON e.id = le.id_editorial
      ORDER by l.id, l.title
    ]]>
  </entry>
  <entry key="books.query.deleteBook">
    <![CDATA[
      DELETE FROM Libro WHERE `isbn` = :isbn
    ]]>
  </entry>
  <entry key="books.query.insertBook">
    <![CDATA[
      INSERT INTO Libro (isbn, title, fecha_publicacion, id_serie, file, image)
      VALUES (:isbn,:title,:fecha_publicacion,:id_serie,:file, :image)
    ]]>
  </entry>
  <entry key="books.query.findBookById">
    <![CDATA[
      SELECT * FROM Libro l WHERE l.id = :id
    ]]>
  </entry>
</properties>
